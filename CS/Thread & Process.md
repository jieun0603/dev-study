# Thread & Process
+ ### 프로세스(Process)   
  운영체제로부터 자원을 할당받은 작업의 단위, 운영체제의 최소 작업 단위      

  > 프로세스는 메모리에 올라갈 때 운영체제로부터 시스템 자원을 할당받으며   
  > 이 때 운영체제는 프로세스마다 각각 독립된 메모리 영역을 code / data / stack / heap 의 형식으로 할당해 준다.   
  > 각각 독립된 메모리 영역을 할당해 주기 때문에 프로세스는 다른 프로세스의 변수나 자료에 접근할 수 없다.   
  >
  > 
  ><br>
  > <img src="https://user-images.githubusercontent.com/73928346/124781134-22580800-df7e-11eb-81db-7684e94a7e70.png" width="300px">    
  >
  > 프로세스들이 운영체제로부터 별도의 메모리 영역을 할당받은 모습   
  > (이미지 출처: Heee's Development Blog)
  
   <br>  
  
+ ### 스레드(Thread)   
  프로세스가 할당받은 자원을 이용하는 실행의 단위로 프로세스 내에 여러개 생길 수 있다.   

  > 스레드는 프로세스가 할당받은 메모리 영역 내에서 stack 형식으로 할당된 메모리 영역은 따로 할당받고   
  > **나머지 code / data / heap 형식으로 할당된 메모리 영역을 공유**한다.   
  > 따라서 각각의 스레드는 별도의 스택을 가지고 있지만 힙 메모리는 서로 읽고 쓸 수 있게 된다.   
  > 
  > 스레드는 code / data / heap 메모리 역역의 내용을 공유하기 때문에   
  > 만약 스레드 하나에서 오류가 발생한다면 같은 프로세스 내의 다른 스레드 모두가 강제로 종료된다.   
  > 스레드의 스케줄링은 운영체제가 처리하지 않기 때문에 프로그래머가 직접 동기화 문제에 대응할 수 있어야 한다.   

<br>



+ #### 프로세스와 스레드 예시

  프로세스는 점포 스레드는 그 가게에 일하는 알바생으로 비유하면   
  프로세스에 부하가 있을 경우 점포를 늘리면 되듯이 서버를 늘려 트래픽을 분산 시킬 수 있다.    
  -> 일종의 멀티 프로세스

	![image](https://user-images.githubusercontent.com/73928346/126057396-32019bbd-803b-4a97-8293-447d60ba7064.png)


<br>
<br>


# Multi Process & Multi Thread
+ **멀티 태스킹** : 하나의 운영체제 안에서 여러 프로세스가 실행되는 것
<br>

+ ### 멀티프로세스 (Multi Process)
하나의 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하는 것   
> + 장점 : 하나의 프로세스가 잘못 되어도 프로그램이 동작한다.   
> + 단점 : context-switching 비용이 멀티스레드보다 많이 든다.

<br>


+ ### 멀티스레드 (Multi Thread)
하나의 프로세스가 여러 작업을 여러 스레드를 사용하여 동시에 처리하는 것   
> + 장점   
>   - 시스템 자원 소모 감소 - context-switching 할 때 공유하고 있는 메모리만큼 메모리 자원을 아낄 수 있다.
>   - 실행 속도 향상 - 스레드는 프로세스 내의 stack 영역을 제외한 모든 메모리를 공유하기 하여 
>       context-switching 발생시 Stack 영역만 변경하면 되기 때문에 통신의 부담이 적어서 응답 시간이 빠르다.   
> + 단점   
>   - 스레드 하나가 프로세스 내 자원을 망쳐버린다면 모튼 프로세스가 종료될 수 있다.   
>   - 자원을 공유하기 때문에 필연적으로 동기화 문제가 발생할 수밖에 없다.   

      동기화 문제 - 멀티스레드를 사용하면 각각의 스레드 중 어떤 것이 어떤 순서로 실행될 지 순서를 알 수 없다.   
      예) A 스레드가 어떤 자원을 사용하다가 다른 B 스레드로 제어권이 넘어간 후 B 스레드가 해당 자원을 수정했을 때    
           다시 제어권을 받은 A 스레드가 해당 자원에 접근하지 못하거나 바꿘 자원에 접근하게 되는 오류가 발생할 수 있다.

  
<br>

+ #### 멀티프로세스와 멀티스레드의 예시
  - 익스플로러와 크롬    
    익스플로러는 멀티스레드, 크롬은 멀티프로세스라서    
    익스플로러는 탭 하나가 죽으면 다른 탭도 같이 죽지만 크롬은 탭 하나가 죽어도 다른 탭들은 살아있다.
	
	  
<br>
<br>

---
### context-switching 이란?   
> CPU가 한 개의 Task(Process / Thread) 를 실행하고 있는 상태에서 Interrupt 요청에 의해   
> 다른 Task 로 실행이 전환되는 과정에서 현재 진행하고 있는 Task(Process, Thread) 의 상태를 저장하고   
> 다음 진행할 Tack의 상태 값을 읽어 교체하는 과정

<br>

### context-switching 이 왜 필요한가?   
> 많은 사람들이 동시에 사용하는 것처럼 하기 위해 실시간처럼 보이려면   
> 컴퓨터 CPU 가 빠른 속도로 Task를 바꿔가며 실행하기 때문인데   
> 그러기 위해선 context-switching 이 필요하게 되었다.   

  

